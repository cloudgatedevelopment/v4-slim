{"version":3,"sources":["index.js"],"names":["require","h","Component","classNames","shallowEqual","FilePreviewAndLink","FileProgress","FileInfo","Buttons","module","exports","shouldComponentUpdate","nextProps","props","componentDidMount","file","preview","handleRequestThumbnail","componentWillUnmount","handleCancelThumbnail","render","isProcessing","progress","preprocess","postprocess","isUploaded","uploadComplete","error","uploadInProgressOrComplete","uploadStarted","uploadInProgress","showRemoveButton","individualCancellation","showRemoveButtonAfterComplete","dashboardItemClass","resumableUploads","id","role","showLinkToFileUploadResult","hideRetryButton","hideCancelButton","hidePauseResumeButton","pauseUpload","cancelUpload","retryUpload","i18n","acquirers","containerWidth","metaFields","canEditFile","removeFile","toggleFileCard","openFileEditor","log","info"],"mappings":";;eAAyBA,OAAO,CAAC,QAAD,C;IAAxBC,C,YAAAA,C;IAAGC,S,YAAAA,S;;AACX,IAAMC,UAAU,GAAGH,OAAO,CAAC,YAAD,CAA1B;;AACA,IAAMI,YAAY,GAAGJ,OAAO,CAAC,kBAAD,CAA5B;;AACA,IAAMK,kBAAkB,GAAGL,OAAO,CAAC,sBAAD,CAAlC;;AACA,IAAMM,YAAY,GAAGN,OAAO,CAAC,gBAAD,CAA5B;;AACA,IAAMO,QAAQ,GAAGP,OAAO,CAAC,YAAD,CAAxB;;AACA,IAAMQ,OAAO,GAAGR,OAAO,CAAC,WAAD,CAAvB;;AAEAS,MAAM,CAACC,OAAP;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAAA,SACEC,qBADF,GACE,+BAAuBC,SAAvB,EAAkC;AAChC,WAAO,CAACR,YAAY,CAAC,KAAKS,KAAN,EAAaD,SAAb,CAApB;AACD,GAHH;;AAAA,SAKEE,iBALF,GAKE,6BAAqB;AACnB,QAAMC,IAAI,GAAG,KAAKF,KAAL,CAAWE,IAAxB;;AACA,QAAI,CAACA,IAAI,CAACC,OAAV,EAAmB;AACjB,WAAKH,KAAL,CAAWI,sBAAX,CAAkCF,IAAlC;AACD;AACF,GAVH;;AAAA,SAYEG,oBAZF,GAYE,gCAAwB;AACtB,QAAMH,IAAI,GAAG,KAAKF,KAAL,CAAWE,IAAxB;;AACA,QAAI,CAACA,IAAI,CAACC,OAAV,EAAmB;AACjB,WAAKH,KAAL,CAAWM,qBAAX,CAAiCJ,IAAjC;AACD;AACF,GAjBH;;AAAA,SAmBEK,MAnBF,GAmBE,kBAAU;AACR,QAAML,IAAI,GAAG,KAAKF,KAAL,CAAWE,IAAxB;AAEA,QAAMM,YAAY,GAAGN,IAAI,CAACO,QAAL,CAAcC,UAAd,IAA4BR,IAAI,CAACO,QAAL,CAAcE,WAA/D;AACA,QAAMC,UAAU,GAAGV,IAAI,CAACO,QAAL,CAAcI,cAAd,IAAgC,CAACL,YAAjC,IAAiD,CAACN,IAAI,CAACY,KAA1E;AACA,QAAMC,0BAA0B,GAAGb,IAAI,CAACO,QAAL,CAAcO,aAAd,IAA+BR,YAAlE;AACA,QAAMS,gBAAgB,GAAIf,IAAI,CAACO,QAAL,CAAcO,aAAd,IAA+B,CAACd,IAAI,CAACO,QAAL,CAAcI,cAA/C,IAAkEL,YAA3F;AACA,QAAMM,KAAK,GAAGZ,IAAI,CAACY,KAAL,IAAc,KAA5B;AAEA,QAAII,gBAAgB,GAAG,KAAKlB,KAAL,CAAWmB,sBAAX,GACnB,CAACP,UADkB,GAEnB,CAACK,gBAAD,IAAqB,CAACL,UAF1B;;AAIA,QAAIA,UAAU,IAAI,KAAKZ,KAAL,CAAWoB,6BAA7B,EAA4D;AAC1DF,MAAAA,gBAAgB,GAAG,IAAnB;AACD;;AAED,QAAMG,kBAAkB,GAAG/B,UAAU,CAAC;AACpC,6BAAuB,IADa;AAEpC,uBAAiB2B,gBAFmB;AAGpC,uBAAiBT,YAHmB;AAIpC,qBAAeI,UAJqB;AAKpC,kBAAY,CAAC,CAACE,KALsB;AAMpC,sBAAgB,KAAKd,KAAL,CAAWsB,gBANS;AAOpC,qCAA+B,CAAC,KAAKtB,KAAL,CAAWmB;AAPP,KAAD,CAArC;AAUA,WACE;AACE,MAAA,KAAK,EAAEE,kBADT;AAEE,MAAA,EAAE,YAAUnB,IAAI,CAACqB,EAFnB;AAGE,MAAA,IAAI,EAAE,KAAKvB,KAAL,CAAWwB;AAHnB,OAKE;AAAK,MAAA,KAAK,EAAC;AAAX,OACE,EAAC,kBAAD;AACE,MAAA,IAAI,EAAEtB,IADR;AAEE,MAAA,0BAA0B,EAAE,KAAKF,KAAL,CAAWyB;AAFzC,MADF,EAKE,EAAC,YAAD;AACE,MAAA,IAAI,EAAEvB,IADR;AAEE,MAAA,KAAK,EAAEY,KAFT;AAGE,MAAA,UAAU,EAAEF,UAHd;AAKE,MAAA,eAAe,EAAE,KAAKZ,KAAL,CAAW0B,eAL9B;AAME,MAAA,gBAAgB,EAAE,KAAK1B,KAAL,CAAW2B,gBAN/B;AAOE,MAAA,qBAAqB,EAAE,KAAK3B,KAAL,CAAW4B,qBAPpC;AASE,MAAA,6BAA6B,EAAE,KAAK5B,KAAL,CAAWoB,6BAT5C;AAWE,MAAA,gBAAgB,EAAE,KAAKpB,KAAL,CAAWsB,gBAX/B;AAYE,MAAA,sBAAsB,EAAE,KAAKtB,KAAL,CAAWmB,sBAZrC;AAcE,MAAA,WAAW,EAAE,KAAKnB,KAAL,CAAW6B,WAd1B;AAeE,MAAA,YAAY,EAAE,KAAK7B,KAAL,CAAW8B,YAf3B;AAgBE,MAAA,WAAW,EAAE,KAAK9B,KAAL,CAAW+B,WAhB1B;AAiBE,MAAA,IAAI,EAAE,KAAK/B,KAAL,CAAWgC;AAjBnB,MALF,CALF,EA+BE;AAAK,MAAA,KAAK,EAAC;AAAX,OACE,EAAC,QAAD;AACE,MAAA,IAAI,EAAE9B,IADR;AAEE,MAAA,EAAE,EAAE,KAAKF,KAAL,CAAWuB,EAFjB;AAGE,MAAA,SAAS,EAAE,KAAKvB,KAAL,CAAWiC,SAHxB;AAIE,MAAA,cAAc,EAAE,KAAKjC,KAAL,CAAWkC,cAJ7B;AAKE,MAAA,IAAI,EAAE,KAAKlC,KAAL,CAAWgC;AALnB,MADF,EAQE,EAAC,OAAD;AACE,MAAA,IAAI,EAAE9B,IADR;AAEE,MAAA,UAAU,EAAE,KAAKF,KAAL,CAAWmC,UAFzB;AAIE,MAAA,0BAA0B,EAAE,KAAKnC,KAAL,CAAWyB,0BAJzC;AAKE,MAAA,gBAAgB,EAAEP,gBALpB;AAME,MAAA,WAAW,EAAE,KAAKlB,KAAL,CAAWoC,WAN1B;AAQE,MAAA,0BAA0B,EAAErB,0BAR9B;AASE,MAAA,UAAU,EAAE,KAAKf,KAAL,CAAWqC,UATzB;AAUE,MAAA,cAAc,EAAE,KAAKrC,KAAL,CAAWsC,cAV7B;AAWE,MAAA,cAAc,EAAE,KAAKtC,KAAL,CAAWuC,cAX7B;AAaE,MAAA,IAAI,EAAE,KAAKvC,KAAL,CAAWgC,IAbnB;AAcE,MAAA,GAAG,EAAE,KAAKhC,KAAL,CAAWwC,GAdlB;AAeE,MAAA,IAAI,EAAE,KAAKxC,KAAL,CAAWyC;AAfnB,MARF,CA/BF,CADF;AA4DD,GA1GH;;AAAA;AAAA,EAAwCpD,SAAxC","sourcesContent":["const { h, Component } = require('preact')\nconst classNames = require('classnames')\nconst shallowEqual = require('is-shallow-equal')\nconst FilePreviewAndLink = require('./FilePreviewAndLink')\nconst FileProgress = require('./FileProgress')\nconst FileInfo = require('./FileInfo')\nconst Buttons = require('./Buttons')\n\nmodule.exports = class FileItem extends Component {\n  shouldComponentUpdate (nextProps) {\n    return !shallowEqual(this.props, nextProps)\n  }\n\n  componentDidMount () {\n    const file = this.props.file\n    if (!file.preview) {\n      this.props.handleRequestThumbnail(file)\n    }\n  }\n\n  componentWillUnmount () {\n    const file = this.props.file\n    if (!file.preview) {\n      this.props.handleCancelThumbnail(file)\n    }\n  }\n\n  render () {\n    const file = this.props.file\n\n    const isProcessing = file.progress.preprocess || file.progress.postprocess\n    const isUploaded = file.progress.uploadComplete && !isProcessing && !file.error\n    const uploadInProgressOrComplete = file.progress.uploadStarted || isProcessing\n    const uploadInProgress = (file.progress.uploadStarted && !file.progress.uploadComplete) || isProcessing\n    const error = file.error || false\n\n    let showRemoveButton = this.props.individualCancellation\n      ? !isUploaded\n      : !uploadInProgress && !isUploaded\n\n    if (isUploaded && this.props.showRemoveButtonAfterComplete) {\n      showRemoveButton = true\n    }\n\n    const dashboardItemClass = classNames({\n      'uppy-Dashboard-Item': true,\n      'is-inprogress': uploadInProgress,\n      'is-processing': isProcessing,\n      'is-complete': isUploaded,\n      'is-error': !!error,\n      'is-resumable': this.props.resumableUploads,\n      'is-noIndividualCancellation': !this.props.individualCancellation\n    })\n\n    return (\n      <div\n        class={dashboardItemClass}\n        id={`uppy_${file.id}`}\n        role={this.props.role}\n      >\n        <div class=\"uppy-Dashboard-Item-preview\">\n          <FilePreviewAndLink\n            file={file}\n            showLinkToFileUploadResult={this.props.showLinkToFileUploadResult}\n          />\n          <FileProgress\n            file={file}\n            error={error}\n            isUploaded={isUploaded}\n\n            hideRetryButton={this.props.hideRetryButton}\n            hideCancelButton={this.props.hideCancelButton}\n            hidePauseResumeButton={this.props.hidePauseResumeButton}\n\n            showRemoveButtonAfterComplete={this.props.showRemoveButtonAfterComplete}\n\n            resumableUploads={this.props.resumableUploads}\n            individualCancellation={this.props.individualCancellation}\n\n            pauseUpload={this.props.pauseUpload}\n            cancelUpload={this.props.cancelUpload}\n            retryUpload={this.props.retryUpload}\n            i18n={this.props.i18n}\n          />\n        </div>\n\n        <div class=\"uppy-Dashboard-Item-fileInfoAndButtons\">\n          <FileInfo\n            file={file}\n            id={this.props.id}\n            acquirers={this.props.acquirers}\n            containerWidth={this.props.containerWidth}\n            i18n={this.props.i18n}\n          />\n          <Buttons\n            file={file}\n            metaFields={this.props.metaFields}\n\n            showLinkToFileUploadResult={this.props.showLinkToFileUploadResult}\n            showRemoveButton={showRemoveButton}\n            canEditFile={this.props.canEditFile}\n\n            uploadInProgressOrComplete={uploadInProgressOrComplete}\n            removeFile={this.props.removeFile}\n            toggleFileCard={this.props.toggleFileCard}\n            openFileEditor={this.props.openFileEditor}\n\n            i18n={this.props.i18n}\n            log={this.props.log}\n            info={this.props.info}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n"]}